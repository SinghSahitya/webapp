{% extends 'app/base.html' %}
{% load static %}
{% block headblock %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
<style>
    :root {
        --rotate: 132deg;
        --card-height: 65vh;
        --card-width: calc(var(--card-height) / 1.5);
    }

    .card-body {
        min-height: 100vh;
        background: #212534;
        display: flex;
        align-items: center;
        flex-direction: column;
        padding-top: 2rem;
        padding-bottom: 2rem;
        box-sizing: border-box;
    }

    .card-container {
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;
        flex-wrap: wrap;
        margin-top: 20px;
    }

    .card {
        background: #191c29;
        width: var(--card-width);
        height: var(--card-height);
        padding: 3px;
        position: relative;
        border-radius: 6px;
        justify-content: center;
        align-items: center;
        text-align: center;
        display: flex;
        font-size: 1.5em;
        color: rgb(88 199 250 / 0%);
        cursor: pointer;
        font-family: cursive;
        margin: 10px;
        overflow: hidden;
        box-shadow: 0 0 20px rgba(88, 199, 250, 0);
        transition: box-shadow 0.3s ease;
    }

    .card:hover {
        box-shadow: 0 0 20px rgba(88, 199, 250, 0.7);
    }

    .card::before {
        content: "";
        width: 100%;
        height: 100%;
        border-radius: 6px;
        position: absolute;
        z-index: -1;
        top: 0;
        left: 0;
        opacity: 0;
        box-shadow: 0 0 20px rgba(88, 199, 250, 0);
        transition: opacity 0.3s ease;
    }

    .card:hover::before {
        opacity: 1;
        box-shadow: 0 0 40px rgba(67, 156, 198, 0.7);
    }

    .card-image {
    width: 100%;
    height: 100%;
    position: relative;
    border-radius: 6px;
    overflow: hidden;
}

.card-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}


    .card-content {
        display: none;
        padding: 20px;
        background-color: #191c29;
    }

    .card-content h3 {
        font-size: 42px;
        margin-bottom: 10px;
        font-weight: bold;
        color: #947bfa;
    }

    .card-content p {
        font-size: 22px;
        color: #ffffff;
    }

    .heading {
        text-align: center;
        font-size: 33px;
        margin-bottom: 20px;
        color: #ffffff;
    }
    .card.selected {
        box-shadow: 0 0 80px rgba(70, 170, 216, 0.7);
    }
</style>
{% endblock %}

{% block bodyblock %}
<div class="card-body">
    <h2 class="heading">You can only chose one ;)</h2>

    <div class="card-container">
        {% for gift in gifts %}
        <div class="card" data-gift-id="{{ gift.id }}">
            <div class="card-image">
                <img src="{%  static 'images/gift.png'  %}">
            </div>
            <div class="card-content">
                <h3>{{ gift.name }}</h3>
                <p>{{ gift.description }}</p>
            </div>
        </div>
        {% endfor %}
    </div>


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    // Add the JavaScript code here
    $(document).ready(function () {
        $(".card").click(function () {
            var card = $(this);
            var giftId = card.data("gift-id");
            revealGift(giftId, card);
        });

        function revealGift(giftId, card) {
    // Make an AJAX request to reveal the selected gift
    $.ajax({
        url: '/reveal_gift/',
        method: 'POST',
        data: { 'gift_id': giftId },
        success: function (response) {
            // Show the revealed gift on the card
            var cardContent = card.find('.card-content');

            // Update the card content with the gift details
            cardContent.find('h3').text(response.name);
            cardContent.find('p').text(response.description);

            // Hide the image and show the content
            card.find('.card-image').hide();
            cardContent.show();

            // Hide other cards
            $(".card").not(card).hide();

            // Add 'selected' class to the chosen card
            card.addClass('selected');

            // Update the heading text to "Your choice"
            $('.heading').text('Congratulations!!');
        },
        error: function () {
            alert('Error revealing the gift.');
        }
    });
}

    });
</script>

{% endblock %}
